(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{389:function(t,e,o){Promise.resolve().then(o.t.bind(o,2625,23)),Promise.resolve().then(o.bind(o,4382))},5118:function(t,e,o){"use strict";o.d(e,{Hh:function(){return g},I2:function(){return c},Mp:function(){return l},Vp:function(){return i},iJ:function(){return r},lC:function(){return u},ug:function(){return p}});var n=o(3908);let s=o(4859).env.NEXT_PUBLIC_API_URL||"http://localhost:4000",a=n.Z.create({baseURL:s,withCredentials:!0,headers:{"Content-Type":"application/json"}}),r={register:(t,e,o)=>a.post("/auth/register",{name:t,email:e,password:o}),login:(t,e)=>a.post("/auth/login",{email:t,password:e}),logout:()=>a.post("/auth/logout"),me:()=>a.get("/auth/me")},c={list:()=>a.get("/rooms"),get:t=>a.get("/rooms/".concat(t)),create:(t,e)=>a.post("/rooms",{title:t,goal:e}),plan:t=>a.post("/rooms/".concat(t,"/plan")),createInvite:t=>a.post("/rooms/".concat(t,"/invites"))},u={get:t=>a.get("/tasks/".concat(t)),assign:(t,e)=>a.post("/tasks/".concat(t,"/assign"),{assignedUserId:e}),updateStatus:(t,e,o)=>a.post("/tasks/".concat(t,"/status"),{status:e,blockedReason:o})},i={get:t=>a.get("/contracts/".concat(t)),propose:(t,e)=>a.post("/contracts/".concat(t,"/propose"),e),publish:(t,e)=>a.post("/contracts/".concat(t,"/publish"),e)},l={list:(t,e)=>a.get("/rooms/".concat(t,"/messages?channel=").concat(e)),sendMaster:(t,e,o)=>a.post("/rooms/".concat(t,"/messages/master"),{content:e,sharedFromMessageId:o}),sendWorker:(t,e)=>a.post("/rooms/".concat(t,"/messages/worker"),{content:e})},p={list:(t,e,o)=>a.get("/rooms/".concat(t,"/notebook"),{params:{q:e,category:o}}),create:(t,e)=>a.post("/rooms/".concat(t,"/notebook"),e)},g={join:t=>a.post("/invites/".concat(t,"/join"))}},4382:function(t,e,o){"use strict";o.d(e,{AuthProvider:function(){return c},a:function(){return u}});var n=o(7573),s=o(7653),a=o(5118);let r=(0,s.createContext)(null);function c(t){let{children:e}=t,[o,c]=(0,s.useState)(null),[u,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{a.iJ.me().then(t=>c(t.data)).catch(()=>c(null)).finally(()=>i(!1))},[]);let l=(0,s.useCallback)(async(t,e)=>{c((await a.iJ.login(t,e)).data)},[]),p=(0,s.useCallback)(async(t,e,o)=>{c((await a.iJ.register(t,e,o)).data)},[]),g=(0,s.useCallback)(async()=>{await a.iJ.logout(),c(null)},[]);return(0,n.jsx)(r.Provider,{value:{user:o,loading:u,login:l,register:p,logout:g},children:e})}function u(){let t=(0,s.useContext)(r);if(!t)throw Error("useAuth must be used within AuthProvider");return t}},2625:function(){}},function(t){t.O(0,[387,908,293,528,744],function(){return t(t.s=389)}),_N_E=t.O()}]);